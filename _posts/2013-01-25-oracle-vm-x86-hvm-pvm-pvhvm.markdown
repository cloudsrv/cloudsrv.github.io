---
layout: post
title:  "Oracle VM x86客户机虚拟模式比较HVM / PVM / PVHVM"
date:   2013-01-25 08:14:41 +0800
categories: Oracle VM
---
![Oracle VM](/assets/img/oracle-vm.png)
## 前言

O记有好几个虚拟化产品，包括自己基于Xen开源项目研发的Oracle VM x86，以及收购Sun的桌面虚拟化系列（包括VirtualBox）和Solaris虚拟化。自己在实验室环境一直在用O记自家的Oracle VM，感觉在测试环境中是足够用了。不过很多人都要它与Vmware的产品比较，我能说的只有一句，你要是有Vmware的License我就没什么话好说，毕竟Oracle VM如果你不需要Support是没有任何费用的。

Oracle VM的客户机可以配置成三种模式：HVM、PVM和PVHVM，自己也用了好多年Oracle VM了，一直对这三种模式不是很理解，最近在内部Support网站了找到了一篇文章，仔细研究了一下。

## 正文

### 硬件虚拟化（HVM）

这个名字挺唬人的，我一直以为这种模式是最快的，虚拟化硬件嘛，虚拟化就是干这个事儿的。但事实上这种模式是三种模式中最后的选择，只有在客户机的操作系统级无法实现其他两种模式的情况下才会使用。因为这种模式下客户机的操作系统根本不会知道有虚拟化硬件的存在，它们完全按照在普通硬件设备上运行的模式运转，我们大部分的桌面虚拟化基本都是如此实现的。这样就会要求Oracle VM有额外的资源开销来“翻译”客户机的操作给Oracle VM。

### 辅助虚拟化（PVM）

其实这种模式才是Oracle VM最为推荐的一种模式，这种模式修改了客户机操作系统的内核和驱动，实现了客户机操作系统直接与硬件进行交互，因此速度最快，也最为稳定。

### 硬件虚拟化使用辅助虚拟化驱动（PVHVM）

这个名字挺长，其实它就是在HVM和PVM中的一种折中的模式，硬件虚拟化但是使用了一些驱动程序来改善客户机操作系统的IO操作。
